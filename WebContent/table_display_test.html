<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width = device-width, initial-scale = 1">
<title>JOC113 Spoofify</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.2/knockout-min.js"></script>


<style type = "text/css">

body{
	margin: 0px;
	background: #7e839d;
}
#tblDefault{
	font-family: sans-serif;
	color: white;
	margin-left: 2%;
	width: 75%;
}
#tblDataAll {
	font-family: sans-serif;
	color: white;
	margin-left: 2%;
	width: 75%;
}
#tblDataSongs {
	font-family: sans-serif;
	color: white;
	margin-left: 2%;
	width: 75%;
}
#tblDataArtists {
	font-family: sans-serif;
	color: white;
	margin-left: 2%;
	width: 75%;
}
#tblDataAlbums {
	font-family: sans-serif;
	color: white;
	margin-left: 2%;
	width: 75%;
}

.search {
	margin-left: 2%;
	margin-top: 3%;
}

.sidebar {
	height: 100%;
	position: fixed;
    width:18%;
    float:left;
    background-color:#7e839d;
    color:white;
    font-size: 20px;
    font-family: Helvetica;
    background: -moz-linear-gradient(bottom, #39455f 0%, #000000 100%);
	background: -webkit-linear-gradient(bottom, #39455f 0%, #000000 100%);
	background: linear-gradient(bottom, #39455f 0%, #000000 100%);
    <!--cursor: pointer;-->
    
}

.main {
	height: 100%;
	margin-left: 18%;
	position: fixed;
	width: 100%;
	color: white;
	background-color: black;
	background-image: url("spoofify_background.jpg");
	background-size: 100% 100%; 
    overflow: scroll;

</style>
<script>

var searchTerm = null;
$(document).ready(function(){
	//var element = $('#tblData');
	
	//Here I can set it so that when the user clicks the radio button, the display table changes
	/*
	$("#radSongs").click(function(){
		document.getElementById("defaultView").style.display="none";
		
	});
	*/
	$("#btnSearch").click(function(){
		var searchTerm = $("#txtSearch").val();
		//Need to find a way to use different search functions based on which radio button is selected
		
		
   		if($('#radAll').is(':checked')) {
   			$("#allMusic").html(
   				"<div>" + 
   					"<table id='tblDataAll' border='1' cellspacing='0' cellpadding='4'>" +
   						"<thead>" + 
   							"<tr>" +
   			        			"<th>Title</th><th>Length</th><th>Artist</th><th>Album</th><th>Release Date</th><th>Play</th>" +
   			    			"</tr>"	+
   	    				"</thead>"+
   	    				"<tbody data-bind='foreach: results'>"+
   			    			"<tr>"+
   			        			"<td data-bind='text: song_title'></td>"+
   			        			"<td data-bind='text: length'></td>"+
   								"<td data-bind='text: artist'></td>"+
   								"<td data-bind='text: album'></td>"+
   								"<td data-bind='text: release_date'></td>"+
   								"<td><audio controls><source src='songs/Oxygen_by_Josh_Chamberlain_and_Luke_Leonard.mp3' type='audio/mpeg'></audio></td>"+

   			    			"</tr> "+
   	    				"</tbody>" +
   					"</table>"+
   				"</div>");
   				searchAll(searchTerm);
   		}
   		else if ($('#radSongs').is(':checked')) {
   			$("#justSongs").html(
   				"<div>" +
   					"<table id='tblDataSongs' border='1' cellspacing='0' cellpadding='4'>" +
   						"<thead>" +
   							"<tr>" +
   						        "<th>Title</th><th>Length</th><th>Artist</th><th>Album</th><th>Release Date</th><th>Play</th>" +
   						    "</tr>"+		
   			    		"</thead>"+
   			    		"<tbody data-bind='foreach: songs'>"+
   						    "<tr>" +
   						        "<td data-bind='text: song_title'></td>"+
   						        "<td data-bind='text: length'></td>"+
   								"<td data-bind='text: artist'></td>"+
   								"<td data-bind='text: album'></td>"+
   								"<td data-bind='text: release_date'></td>" +
   								"<td><audio controls><source src='songs/Oxygen_by_Josh_Chamberlain_and_Luke_Leonard.mp3' type='audio/mpeg'></audio></td>"+
   						    "</tr> "+
   			    		"</tbody>"+
   					"</table>"+
   				"</div>");
   			searchSongs(searchTerm);
   		}
   		else if ($('#radArtists').is(':checked')) {
   			$("#justArtists").html(
   				"<div>" +
   					"<table id='tblDataArtists' border='1' cellspacing='0' cellpadding='4'>" +
   					"<thead>" +
   						"<tr>" +
   					        "<th>Band</th><th>First Name</th><th>Last Name</th><th>Bio</th>" +
   					    "</tr>" +	
   				   	"</thead>" +
   				 	  	"<tbody data-bind='foreach: artists'>" +
   						    "<tr>" +
   						        "<td data-bind='text: band_name'></td>" +
   						        "<td data-bind='text: first_name'></td>" +
   						        "<td data-bind='text: last_name'></td>" +
   						        "<td data-bind='text: bio'></td>" + 
   						    "</tr>" + 
   				   		"</tbody>" +
   					"</table>" +		
   				"</div>");
   			searchArtists(searchTerm);
   		}
   		else if ($('#radAlbums').is(':checked')) {
   			$("#justAlbums").html(
   				"<div>" +
   					"<table id='tblDataAlbums' border='1' cellspacing='0' cellpadding='4'>" +
   						"<thead>" +
   							"<tr>" +
   				        		"<th>Album Title</th><th>Tracks</th><th>Release Date</th><th>Recording Company</th><th>PMRC</th><th>Album Length (Hours)</th>" +
   				    		"</tr>" +	
   			   			"</thead>" +
   			   			"<tbody data-bind='foreach: albums'>" +
   				    		"<tr>" +
   				        		"<td data-bind='text: title'></td>" +
   				        		"<td data-bind='text: release_date'></td>" +
   				        		"<td data-bind='text: recording_company_name'></td>" +
   				        		"<td data-bind='text: number_of_tracks'></td>" +
   				        		"<td data-bind='text: PMRC_rating'></td>" +
   				        		"<td data-bind='text: length'></td>" +
   				    		"</tr> " +
   			   			"</tbody>" +
   					"</table>" +
   				"</div>");
   			searchAlbums(searchTerm);
   		}
	});
	/*
	$("#txtSearch").keyup(function(){
		var searchTerm = $("#txtSearch").val();
		if(searchTerm.length > 3){
			console.log(searchTerm);
			search(searchTerm);
		}
	});    
	*/
	
	
	$("#btnClear").click(function(){
	//Clear table and #txtSearch to let the user make a new search
	//Must empty the data in the table, but not the whole table itself
		var tbl = $("#tbody");
		tbl.empty();
	
	});
});

function searchAll(searchTerm){
	//ko.cleanNode(data);
	var searchUrl = "api/get_all?searchTerm=" + searchTerm;
	console.log(searchUrl);
	$.get(searchUrl, function(data){
		console.log(data);
		allSearchResults(data);
	});
}

function searchSongs(searchTerm){
	//ko.cleanNode(data);
	var searchUrl = "api/get_songs?searchTerm=" + searchTerm;
	console.log(searchUrl);
	$.get(searchUrl, function(data){
		console.log(data);
		songSearchResults(data);
	});
}

function searchArtists(searchTerm){
	//ko.cleanNode(data);
	var searchUrl = "api/get_artists?searchTerm=" + searchTerm;
	console.log(searchUrl);
	$.get(searchUrl, function(data){
		console.log(data);
		artistSearchResults(data);
	});
}

function searchAlbums(searchTerm){
	//ko.cleanNode(data);
	var searchUrl = "api/get_albums?searchTerm=" + searchTerm;
	console.log(searchUrl);
	$.get(searchUrl, function(data){
		console.log(data);
		albumSearchResults(data);
	});
}
	
function allSearchResults(data){
	
	console.log(data.results);
	var tbldata = $("#tblDataAll").find("tbody")[0];
	ko.cleanNode(tblDataAll); 
	ko.applyBindings(data, tbldata);
}

function songSearchResults(data){
	
	console.log(data.songs);
	var tbldata = $("#tblDataSongs").find("tbody")[0];
	ko.cleanNode(tblDataSongs); 
	ko.applyBindings(data, tbldata);
}
function artistSearchResults(data){
	
	console.log(data.artists);
	var tbldata = $("#tblDataArtists").find("tbody")[0];
	ko.cleanNode(tblDataArtists); 
	ko.applyBindings(data, tbldata);
}
function albumSearchResults(data){
	
	console.log(data.albums);
	var tbldata = $("#tblDataAlbums").find("tbody")[0];
	ko.cleanNode(tblDataAlbums); 
	ko.applyBindings(data, tbldata);
}
//Show/hide function
function show(x){
	if (x==0){
		//https://www.youtube.com/watch?v=zndWZv9DZWc
		document.getElementById("justSongs").style.display="none";
		document.getElementById("justArtists").style.display="none";
		document.getElementById("justAlbums").style.display="none";
		document.getElementById("allMusic").style.display="block";
	}
	else if (x==1){
		document.getElementById("allMusic").style.display="none";
		document.getElementById("justArtists").style.display="none";
		document.getElementById("justAlbums").style.display="none";
		document.getElementById("justSongs").style.display="block";
	}
	else if (x==2){
		document.getElementById("allMusic").style.display="none";
		document.getElementById("justSongs").style.display="none";
		document.getElementById("justAlbums").style.display="none";
		document.getElementById("justArtists").style.display="block";
	}
	else if (x==3){
		document.getElementById("allMusic").style.display="none";
		document.getElementById("justSongs").style.display="none";
		document.getElementById("justArtists").style.display="none";
		document.getElementById("justAlbums").style.display="block";
	}
}

function resultList(){
	self = this;
}

function songList(){
	self = this;
}

function albumList(){
	self = this;
}

function artistList(){
	self = this;
}

</script>
</head>

<body>
<div id="container">

<div class = "main">

	<div class = "search">
		<br />
		<input type="text" id="txtSearch" placeholder="Search..."/>
		<br />
		<input type="button" id="btnSearch" value="Search" />
		<input type="button" id="btnClear" value="Clear Search" />
		</div>
<br /><br />
<!-- This is the section that will be shown when the All Music radio button is selected -->
<div id = "defaultView">
	<table id="tblDefault" border="1" cellspacing="0" cellpadding="4">
		<thead>
			<tr>
				<th>Title</th><th>Length</th><th>Artist</th><th>Album</th><th>Release Date</th><th>Play</th>
		    </tr>		
    	</thead>
	</table>
</div>
<div id ="allMusic" style="overflow-y:auto;">
<!-- 
	<table id="tblDataAll" border="1" cellspacing="0" cellpadding="4">
		<thead>
			<tr>
		        <th>Title</th><th>Length</th><th>Artist</th><th>Album</th><th>Release Date</th><th>Play</th>
		    </tr>		
    	</thead>
    	<tbody data-bind="foreach: results">
		    <tr>
		        <td data-bind="text: song_title"></td>
		        <td data-bind="text: length"></td>
				<td data-bind="text: artist"></td>
				<td data-bind="text: album"></td>
				<td data-bind="text: release_date"></td>
		    </tr> 
    	</tbody>
	</table>
	-->
</div>
<!-- This is the table that will be shown when the Songs radio button is selected -->
<div id ="justSongs">
<!-- 
<table id="tblDataSongs" border="1" cellspacing="0" cellpadding="4">
	<thead>
		<tr>
	        <th>Title</th><th>Length</th><th>Artist</th><th>Album</th><th>Release Date</th><th>Play</th>
	    </tr>		
    </thead>
    <tbody data-bind="foreach: songs">
	    <tr>
	        <td data-bind="text: song_title"></td>
	        <td data-bind="text: length"></td>
			<td data-bind="text: artist"></td>
			<td data-bind="text: album"></td>
			<td data-bind="text: release_date"></td>
	    </tr> 
    </tbody>
</table>
-->
<!-- Just a note: what if I added how many albums an artist has written by using a subquery? That would be pretty neat.
		Only do that if there's extra time at the end -->
</div>
<div id ="justArtists">
<!-- 
<table id="tblDataArtists" border="1" cellspacing="0" cellpadding="4">
	<thead>
		<tr>
	        <th>Band</th><th>First Name</th><th>Last Name</th><th>Bio</th>
	    </tr>		
   	</thead>
   	<tbody data-bind="foreach: results">
	    <tr>
	        <td data-bind="text: band_name"></td>
	        <td data-bind="text: first_name"></td>
	        <td data-bind="text: last_name"></td>
	        <td data-bind="text: bio"></td>
	    </tr> 
   	</tbody>
</table>
	-->
</div>
<div id ="justAlbums">
<!-- 
<table id="tblDataAlbums" border="1" cellspacing="0" cellpadding="4">
	<thead>
		<tr>
	        <th>Album Title</th><th>Tracks</th><th>Release Date</th><th>Recording Company</th><th>PMRC</th><th>Album Length (Hours)</th>
	    </tr>		
   	</thead>
   	<tbody data-bind="foreach: albums">
	    <tr>
	        <td data-bind="text: title"></td>
	        <td data-bind="text: number_of_tracks"></td>
	        <td data-bind="text: release_date"></td>
	        <td data-bind="text: recording_company_name"></td>
	        <td data-bind="text: PMRC_rating"></td>
	        <td data-bind="text: length"></td>
	    </tr> 
   	</tbody>
</table>
-->

</div>

</div>
<div class= "sidebar">
	<div class="logo">
		<img src = "spoofify_logo.png" alt = "logo" width = "100%"/>
		<br/>
	</div>
	<!-- These radio buttons will pass values to the tblShow function, defining which table will be shown, and which servlet will be used -->
	<input type="radio" id="radAll" name = "radSearchBy" onclick="show(0)" checked> All Music<br>
	<input type="radio" id="radSongs" name = "radSearchBy" onclick="show(1)"> Songs<br>
    <input type="radio" id="radArtists" name = "radSearchBy" onclick="show(2)"> Artists<br>
    <input type="radio" id="radAlbums" name = "radSearchBy" onclick="show(3)"> Albums
</div>
</div>
</body>

</html>



<!--  Here's a working select function that I can incorporate once I get this working
function show(x){
	if (x==0){
		//https://www.youtube.com/watch?v=zndWZv9DZWc
		document.getElementById("justSongs").style.display="none";
		document.getElementById("allMusic").style.display="block";
	}
	else if (x==1){
		document.getElementById("allMusic").style.display="none";
		document.getElementById("justSongs").style.display="block";
	}
}
-->

<!-- Code used to add audio file
<audio controls>
<source src="songs/Oxygen_by_Josh_Chamberlain_and_Luke_Leonard.mp3" type="audio/mpeg">
</audio> -->